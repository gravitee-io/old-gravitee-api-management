{
	"info": {
		"_postman_id": "92bfd526-78db-47c8-8631-ae0cbc76ca8a",
		"name": "Documentation",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "-- Prepare --",
			"item": [
				{
					"name": "Create READER group",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ed4eb8ed-f40b-4661-870e-a945d1dc0ba8",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.collectionVariables.set(\"created_reader_group\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_reader_group_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Postman Reader\",\n    \"event_rules\": [\n        {\n            \"event\": \"API_CREATE\"\n        }\n    ],\n    \"lock_api_role\": false,\n    \"lock_application_role\": false,\n    \"disable_membership_notifications\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/groups",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"configuration",
								"groups"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User member",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2088040e-efbf-469a-9b4d-8a733b3c83a2",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"    ",
									"    var user = pm.response.json().find(user => user.displayName === pm.request.url.query.get(\"q\"));",
									"    pm.collectionVariables.set(\"user_member\", JSON.stringify(user));",
									"    pm.collectionVariables.set(\"user_member_reference\", user.reference);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d77df610-9a9b-4b3b-aaa4-be5500e4da8b",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/search/users/?q=user",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"search",
								"users",
								""
							],
							"query": [
								{
									"key": "q",
									"value": "user"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add READER member to group",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "629345f6-4553-4313-8e3b-4d60eeba8c06",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "827594f2-0bc5-4d54-b057-433e2d5bf65f",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "[\n    {\n        \"reference\": \"{{user_member_reference}}\",\n        \"roles\": [\n            {\n                \"scope\": \"API\",\n                \"name\": \"USER\"\n            },\n            {\n                \"scope\": \"APPLICATION\",\n                \"name\": \"USER\"\n            }\n        ]\n    }\n]",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/groups/:reviewerGroupId/members",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"configuration",
								"groups",
								":reviewerGroupId",
								"members"
							],
							"variable": [
								{
									"key": "reviewerGroupId",
									"value": "{{created_reader_group_id}}"
								}
							]
						},
						"description": "Use a group a reviewer which is not directly linked to the API."
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "03ab5b33-7ffc-4751-8bd4-ca0289f15f1c",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "eed89720-f2dd-468b-8a6a-98fd166e5e03",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Create UNPUBLISHED homepage and page",
			"item": [
				{
					"name": "Create homepage",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "48b5280d-c79d-4366-b6c6-57c8b7099eac",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be unpublished\", function () {",
									"    pm.expect(jsonData.published).to.be.false;",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_homepage\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_homepage_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Homepage\",\n    \"type\": \"MARKDOWN\",\n    \"parentId\": \"\",\n    \"content\": \"This is my homepage\",\n    \"homepage\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Create page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "52594ff6-3d1b-4db3-8e06-251464ccf00e",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be unpublished\", function () {",
									"    pm.expect(jsonData.published).to.be.false;",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_page\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_page_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"documentation.md\",\n    \"type\": \"MARKDOWN\",\n    \"parentId\": \"\",\n    \"content\": \"# Here is a documentation file\\n\\nFake documentation\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								""
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "ad4f1774-f1ab-45f1-88ea-2df8f4b60ae7",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "5a170770-6875-45bf-bbb2-e6ca4a794bbb",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check documentation on portal",
			"item": [
				{
					"name": "Get homepage empty result",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d3a30820-d07f-47da-9ba0-558f575764b5",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.empty;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?homepage=true",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "homepage",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get pages contains topbar link",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "85b27692-fb2a-4afe-a431-28a699ee39d9",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"// This is the topbar link in portal",
									"var documentation = jsonData.data.find(page => page.name === \"Documentation\");",
									"",
									"pm.test(\"Should contain a link named 'Documentation'\", function () {",
									"    pm.expect(documentation).to.be.not.null;",
									"    pm.expect(documentation.type).to.eql(\"LINK\");",
									"});",
									"",
									"pm.collectionVariables.set(\"default_documentation_page_id\", documentation.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?size=-1&homepage=false",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "size",
									"value": "-1"
								},
								{
									"key": "homepage",
									"value": "false"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "application1",
						"type": "string"
					},
					{
						"key": "username",
						"value": "application1",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8f762c47-d4f0-4820-9fc6-fc945afa38e2",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "9fe8a380-952b-4c7a-aa3d-65e3b03d4f27",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Publish previous pages",
			"item": [
				{
					"name": "Publish homepage",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a39f4078-f954-4d08-b0a3-73f58bfe1f4c",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be published\", function () {",
									"    pm.expect(jsonData.published).to.be.true;",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_homepage\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_homepage_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"published\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_homepage_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Publish page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c92176f4-f13f-434f-81fa-5c79896b8292",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be published\", function () {",
									"    pm.expect(jsonData.published).to.be.true;",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_page\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_page_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"published\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_id}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "268b66b9-73d8-4456-b213-5462e3ad4570",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "b4860fac-5bd0-4cf7-b583-3ce56e768da4",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check documentation on portal",
			"item": [
				{
					"name": "Get homepage contains created homepage",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3429345e-7309-4966-8fef-7abf26b593c2",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"var page = jsonData.data.find(page => page.id === pm.collectionVariables.get('created_homepage_id'))",
									"",
									"pm.test(\"Page should be present\", function (){",
									"    pm.expect(page).to.be.not.null;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?homepage=true",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "homepage",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get pages contains created page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "45a8f301-8781-42b9-a7af-90d7f472c85d",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"var page = jsonData.data.find(page => page.id === pm.collectionVariables.get('created_page_id'))",
									"",
									"pm.test(\"Page should be present\", function (){",
									"    pm.expect(page).to.be.not.null;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?size=-1&homepage=false",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "size",
									"value": "-1"
								},
								{
									"key": "homepage",
									"value": "false"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "application1",
						"type": "string"
					},
					{
						"key": "username",
						"value": "application1",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "9077817f-df1e-45b0-b4c8-a6c71377742b",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "b3475865-725a-4c0b-ad32-f748a06b5ac6",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Create FOLDER with one page and move one into it",
			"item": [
				{
					"name": "Create folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "442b89f1-1d48-4b4b-8fdf-6f9ba8317164",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be unpublished\", function () {",
									"    pm.expect(jsonData.published).to.be.false;",
									"});",
									"",
									"pm.test(\"Should be a folder\", function () {",
									"    pm.expect(jsonData.type).to.eql(\"FOLDER\");",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_folder\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_folder_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Folder\",\n    \"type\": \"FOLDER\",\n    \"parentId\": \"\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Publish folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f0245111-a81a-4b4f-809d-5cdc8f8bab3f",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be published\", function () {",
									"    pm.expect(jsonData.published).to.be.true;",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_folder\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_folder_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"published\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_folder_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create PUBLISHED page inside folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "05a9de71-a41c-417b-959d-b10592a255b0",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should have parentId\", function () {",
									"    pm.expect(jsonData.parentId).to.eql(pm.collectionVariables.get(\"created_folder_id\"));",
									"});",
									"",
									"pm.test(\"Should be published\", function () {",
									"    pm.expect(jsonData.published).to.be.true;",
									"});",
									"",
									"pm.test(\"Should be a folder\", function () {",
									"    pm.expect(jsonData.type).to.eql(\"MARKDOWN\");",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_page_inside_folder\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_page_inside_folder_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"In folder page\",\n    \"type\": \"MARKDOWN\",\n    \"parentId\": \"{{created_folder_id}}\",\n    \"content\": \"this page is created directly inside folder\",\n    \"published\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Create PUBLISHED page outside folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3944d076-aa05-4858-be01-1a5d3f436e07",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be published\", function () {",
									"    pm.expect(jsonData.published).to.be.true;",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_page_outside_folder\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_page_outside_folder_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Outside folder\",\n    \"type\": \"MARKDOWN\",\n    \"parentId\": \"\",\n    \"content\": \"This is a page created outside the folder\",\n    \"published\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Move outside page inside folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "91386120-0adf-4e74-ab8a-4edb6bdb40b2",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should have parentId\", function () {",
									"    pm.expect(jsonData.parentId).to.eql(pm.collectionVariables.get(\"created_folder_id\"));",
									"});",
									"",
									"pm.test(\"Should be published\", function () {",
									"    pm.expect(jsonData.published).to.be.true;",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_page_outside_folder\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_page_outside_folder_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"parentId\": \"{{created_folder_id}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_outside_folder_id}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "e6d4a50d-3b41-4c24-adf0-da700dc89bd8",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "d0ce9866-3675-477b-986c-60e46eadec42",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check documentation on portal",
			"item": [
				{
					"name": "Get homepage ok",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1eea54eb-14a6-46c8-b398-7d2306e6caf8",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"var page = jsonData.data.find(page => page.id === pm.collectionVariables.get('created_homepage_id'))",
									"",
									"pm.test(\"Page should be present\", function (){",
									"    pm.expect(page).to.be.not.null;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?homepage=true",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "homepage",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get pages contains pages",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "948ed948-ec3b-44e8-817b-3bfbb34ce157",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"var pageIds = jsonData.data.map(page => page.id);",
									"",
									"pm.test(\"Pages should be present\", function (){",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_inside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_outside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"default_documentation_page_id\"));",
									"});",
									"",
									"pm.test(\"Homepage should not be present\", function() {",
									"    pm.expect(pageIds).to.not.include(pm.collectionVariables.get(\"created_homepage_id\"))",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?size=-1&homepage=false",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "size",
									"value": "-1"
								},
								{
									"key": "homepage",
									"value": "false"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get page ok",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dbc67b58-1a26-444d-87c4-766bdfb338d2",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"var page = JSON.parse(pm.collectionVariables.get(\"created_page_outside_folder\"));",
									"",
									"pm.test(\"Should have same title\", function () {",
									"    pm.expect(jsonData.name).to.eql(page.name);",
									"});",
									"",
									"pm.test(\"Should have same content\", function () {",
									"    pm.expect(jsonData.content).to.eql(page.content);",
									"});",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages/:pageId?include=content",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages",
								":pageId"
							],
							"query": [
								{
									"key": "include",
									"value": "content"
								}
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_outside_folder_id}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "application1",
						"type": "string"
					},
					{
						"key": "username",
						"value": "application1",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "caf04ea3-d81f-497b-8651-8f72e5876956",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "dd1d04a0-1ba0-4e75-bf7a-42a661a106ea",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Add metadata with templating",
			"item": [
				{
					"name": "Add metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0d77b5ce-eefc-4008-9e12-3648d055cd06",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should have key\", function () {",
									"    pm.expect(jsonData.key).to.eql(\"postman-metadata\");",
									"});",
									"",
									"pm.collectionVariables.set(\"created_metadata\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_metadata_id\", jsonData.key);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"format\": \"string\",\n    \"name\": \"postman-metadata\",\n    \"value\": \"metadata-value\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/metadata",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"configuration",
								"metadata"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create PUBLISHED page using templating",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c66fdc1b-23c0-44cd-a00f-0f4db0bbf122",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not have parentPath\", function () {",
									"    pm.expect(jsonData.parentPath).to.eql(\"\");",
									"});",
									"",
									"pm.test(\"Should be published\", function () {",
									"    pm.expect(jsonData.published).to.be.true;",
									"});",
									"",
									"pm.test(\"Should contain template string\", function() {",
									"    pm.expect(jsonData.content).to.eql(\"${metadata['postman-metadata']}\");",
									"});",
									"",
									"",
									"pm.collectionVariables.set(\"created_page_metadata\", JSON.stringify(jsonData));",
									"pm.collectionVariables.set(\"created_page_metadata_id\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"metadata\",\n    \"type\": \"MARKDOWN\",\n    \"parentId\": \"\",\n    \"content\": \"${metadata['postman-metadata']}\",\n    \"published\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								""
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "65f137bc-27da-4929-ab99-5c7dc3eadfb4",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "0c8ec2da-2417-42a7-936d-4b65e37aae7b",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check documentation on portal",
			"item": [
				{
					"name": "Get page ok",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5a89c550-6e1d-4276-8f61-ec8f35378225",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"var page = JSON.parse(pm.collectionVariables.get(\"created_page_metadata\"));",
									"",
									"pm.test(\"Should have same title\", function () {",
									"    pm.expect(jsonData.name).to.eql(page.name);",
									"});",
									"",
									"pm.test(\"Should have interpolated content\", function () {",
									"    pm.expect(jsonData.content).to.eql(\"metadata-value\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages/:pageId?include=content",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages",
								":pageId"
							],
							"query": [
								{
									"key": "include",
									"value": "content"
								}
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_metadata_id}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "application1",
						"type": "string"
					},
					{
						"key": "username",
						"value": "application1",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8d413a54-8279-48ba-8c2c-000844bcfeb8",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "3f67103f-faec-4c90-9821-c59b95d608db",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Exclude group",
			"item": [
				{
					"name": "READER can get pages",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "51aa4d2e-c83b-44ba-8f18-835fa3fdde12",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"var pageIds = jsonData.data.map(page => page.id);",
									"",
									"pm.test(\"Pages should be present\", function (){",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_inside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_outside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_metadata_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"default_documentation_page_id\"));",
									"});",
									"",
									"pm.test(\"Homepage should not be present\", function() {",
									"    pm.expect(pageIds).to.not.include(pm.collectionVariables.get(\"created_homepage_id\"))",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "user",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?size=-1&homepage=false",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "size",
									"value": "-1"
								},
								{
									"key": "homepage",
									"value": "false"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "READER can get page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "06818b66-45e3-4869-a2b9-06ddd2b18e14",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"var page = JSON.parse(pm.collectionVariables.get(\"created_page\"));",
									"",
									"pm.test(\"Should have same title\", function () {",
									"    pm.expect(jsonData.name).to.eql(page.name);",
									"});",
									"",
									"pm.test(\"Should have same content\", function () {",
									"    pm.expect(jsonData.content).to.eql(page.content);",
									"});",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "user",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages/:pageId?include=content",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages",
								":pageId"
							],
							"query": [
								{
									"key": "include",
									"value": "content"
								}
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Exclude READER group",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "85799569-e681-4d27-a59a-4bc15be27c19",
								"exec": [
									"var page = JSON.parse(pm.collectionVariables.get(\"created_page\"));",
									"",
									"delete page.id;",
									"delete page.type;",
									"delete page.lastModificationDate;",
									"delete page.contentType;",
									"delete page.parentPath;",
									"delete page.messages;",
									"delete page.api;",
									"",
									"page.excluded_groups = [pm.collectionVariables.get(\"created_reader_group_id\")];",
									"",
									"pm.collectionVariables.set(\"created_page\", JSON.stringify(page));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1e91781d-f962-4a7d-b419-cfebb010c6a2",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var page = pm.response.json();",
									"",
									"pm.test(\"Should have excluded group\", function() {",
									"    pm.expect(page.excluded_groups).to.have.members([pm.collectionVariables.get(\"created_reader_group_id\")]);",
									"    pm.expect(page.visibility).to.eql(\"PRIVATE\");",
									"    pm.expect(page.excludedAccessControls).to.be.true;",
									"    pm.expect(page.accessControls).not.to.be.null;",
									"    pm.expect(page.accessControls).not.to.be.empty;",
									"    const excludedGroups = page.accessControls.filter((control) => control.referenceType.toUpperCase() === 'GROUP').map((control) => control.referenceId);",
									"    pm.expect(excludedGroups).to.have.members([pm.collectionVariables.get(\"created_reader_group_id\")]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{created_page}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "READER cannot get pages",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f161bbc-d95e-46f4-a3ba-10b2218b67bb",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"var pageIds = jsonData.data.map(page => page.id);",
									"",
									"pm.test(\"Pages should be present\", function (){",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_inside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_outside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_metadata_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"default_documentation_page_id\"));",
									"});",
									"",
									"pm.test(\"Homepage should not be present\", function() {",
									"    pm.expect(pageIds).to.not.include(pm.collectionVariables.get(\"created_homepage_id\"))",
									"});",
									"",
									"pm.test(\"Excluded page should not be present\", function() {",
									"    pm.expect(pageIds).to.not.include(pm.collectionVariables.get(\"created_page_id\"))",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "user",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?size=-1&homepage=false",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "size",
									"value": "-1"
								},
								{
									"key": "homepage",
									"value": "false"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "READER cannot get page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3de2b3ba-e657-46e5-a50e-8a85db4ba3cf",
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "user",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages/:pageId?include=content",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages",
								":pageId"
							],
							"query": [
								{
									"key": "include",
									"value": "content"
								}
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_id}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "848ce6f5-6dd4-4a8f-abf9-18b16bc2d05f",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "1029098f-5bbd-4f5f-8e00-6f6efe96e8d6",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Translate",
			"item": [
				{
					"name": "Translate page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6cc1104e-5794-44b8-b576-b98642d86b40",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var page = pm.response.json();",
									"",
									"pm.test(\"Type is translation\", function() {",
									"    pm.expect(page.type).to.eql(\"TRANSLATION\");",
									"});",
									"",
									"pm.test(\"Should be published\", function() {",
									"    pm.expect(page.published).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"type\": \"TRANSLATION\",\n    \"parentId\": \"{{created_page_id}}\",\n    \"configuration\": {\n        \"inheritContent\": \"false\",\n        \"lang\": \"fr\"\n    },\n    \"name\": \"Fausse documentation\",\n    \"content\": \"Fausse documentation\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								""
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "81c8a006-8691-4dfe-89a3-d54bbce2b165",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "a8352cb5-c717-4e68-874c-e82d2355a1be",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check documentation on portal",
			"item": [
				{
					"name": "Get pages contains translated page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0d9ae6d1-abfc-41b0-9b96-5aa4affb9bf7",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should not be empty\", function () {",
									"    pm.expect(jsonData.data).to.be.not.empty;",
									"});",
									"",
									"var pageIds = jsonData.data.map(page => page.id);",
									"",
									"pm.test(\"Pages should be present\", function (){",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_inside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_outside_folder_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"created_page_metadata_id\"));",
									"    pm.expect(pageIds).to.include(pm.collectionVariables.get(\"default_documentation_page_id\"));",
									"});",
									"",
									"pm.test(\"Homepage should not be present\", function() {",
									"    pm.expect(pageIds).to.not.include(pm.collectionVariables.get(\"created_homepage_id\"));",
									"});",
									"",
									"var translatedPage = jsonData.data.find(page => page.id === pm.collectionVariables.get(\"created_page_id\"));",
									"",
									"pm.test(\"Page should be translated\", function() {",
									"    pm.expect(translatedPage.name).to.eql(\"Fausse documentation\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept-Language",
								"value": "fr-FR,fr;q=0.9",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages?size=-1&homepage=false",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages"
							],
							"query": [
								{
									"key": "size",
									"value": "-1"
								},
								{
									"key": "homepage",
									"value": "false"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get page translated",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "087b4e7c-db2b-430f-a296-9b9197b784cc",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Should have same title\", function () {",
									"    pm.expect(jsonData.name).to.eql(\"Fausse documentation\");",
									"});",
									"",
									"pm.test(\"Should have interpolated content\", function () {",
									"    pm.expect(jsonData.content).to.eql(\"Fausse documentation\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept-Language",
								"type": "text",
								"value": "fr-FR,fr;q=0.9"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{GRAVITEEIO_PORTAL_URL}}/pages/:pageId?include=content",
							"host": [
								"{{GRAVITEEIO_PORTAL_URL}}"
							],
							"path": [
								"pages",
								":pageId"
							],
							"query": [
								{
									"key": "include",
									"value": "content"
								}
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_id}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "application1",
						"type": "string"
					},
					{
						"key": "username",
						"value": "application1",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "070a9628-4ae4-4bbb-9bab-168635068610",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "afb8b5c3-e3b4-4b82-b1e9-425147907b8f",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "-- Clean up --",
			"item": [
				{
					"name": "Delete metadata page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "48471fc8-45c8-43ee-ab87-dc440d750a3e",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_metadata_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "79cdb737-0ec8-42f2-9adc-c3b058283d01",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/metadata/:metadataId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"configuration",
								"metadata",
								":metadataId"
							],
							"variable": [
								{
									"key": "metadataId",
									"value": "{{created_metadata_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete page outside folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "45e339f8-b93f-4573-a663-b52bebf45438",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_outside_folder_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete page inside folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bae72cba-774b-4ca1-bb3f-1b67071e0b73",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_inside_folder_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete folder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "57174920-a7db-4f80-bd20-e045717ad9db",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_folder_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete page",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f9c82910-b60f-433d-98a8-818ab06537e4",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_page_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete homepage",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "06f89436-ed36-4ec4-96fd-98da3cebc759",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/portal/pages/:pageId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"portal",
								"pages",
								":pageId"
							],
							"variable": [
								{
									"key": "pageId",
									"value": "{{created_homepage_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete READER group",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "436af34d-f32c-4c5c-9554-44bba720444c",
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{GRAVITEEIO_MGMT_URL}}/configuration/groups/:reviewerGroupId",
							"host": [
								"{{GRAVITEEIO_MGMT_URL}}"
							],
							"path": [
								"configuration",
								"groups",
								":reviewerGroupId"
							],
							"variable": [
								{
									"key": "reviewerGroupId",
									"value": "{{created_reader_group_id}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "basic",
				"basic": [
					{
						"key": "password",
						"value": "admin",
						"type": "string"
					},
					{
						"key": "username",
						"value": "admin",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "772ae47c-04e2-4c88-8018-c82fd8aef269",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "8b9f11bd-631c-4798-8bee-a8c416630cd6",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"variable": [
		{
			"id": "31e8e09d-af7a-48f9-a5a3-23a12fd82f5c",
			"key": "created_homepage",
			"value": ""
		},
		{
			"id": "d5fbc818-61ce-42b7-8c74-0768fb313333",
			"key": "created_homepage_id",
			"value": ""
		},
		{
			"id": "c896285b-3086-4e66-b027-540af6aec38b",
			"key": "created_reader_group",
			"value": ""
		},
		{
			"id": "a674952d-18f4-4ca8-9934-945522e4f547",
			"key": "created_reader_group_id",
			"value": ""
		},
		{
			"id": "69ab917d-3901-46c9-97d3-4a80fe81cb87",
			"key": "user_member",
			"value": ""
		},
		{
			"id": "307d589b-18e6-43fa-b2cc-553a73cf4a7c",
			"key": "user_member_reference",
			"value": ""
		},
		{
			"id": "8b8f3585-7aa2-4372-af3b-b55c841db4c1",
			"key": "created_page",
			"value": ""
		},
		{
			"id": "51057caa-9e38-4f4f-9ad1-f71318ba36fc",
			"key": "created_page_id",
			"value": ""
		},
		{
			"id": "02f35380-edfa-45ac-b8b7-1663ab5af8f7",
			"key": "created_folder",
			"value": ""
		},
		{
			"id": "4598e01d-8ebf-488c-b6ca-89660c759b66",
			"key": "created_folder_id",
			"value": ""
		},
		{
			"id": "38ce4cb7-d459-446b-8620-001c8de7f41a",
			"key": "created_page_inside_folder",
			"value": ""
		},
		{
			"id": "d65350a2-2555-430b-969f-cabd22c66038",
			"key": "created_page_inside_folder_id",
			"value": ""
		},
		{
			"id": "88a730ad-1287-4c4d-9572-cb7b737bae17",
			"key": "created_page_outside_folder",
			"value": ""
		},
		{
			"id": "b40fd936-6c84-4c07-b93d-febfa71ad003",
			"key": "created_page_outside_folder_id",
			"value": ""
		},
		{
			"id": "7fb65954-578e-4c32-b46d-7c8952017c6d",
			"key": "default_documentation_page_id",
			"value": ""
		},
		{
			"id": "12122b37-9ab9-4cb3-ac53-c46db456cb42",
			"key": "created_metadata",
			"value": ""
		},
		{
			"id": "f8bf0a9f-982d-423b-9c84-db70e019e879",
			"key": "created_metadata_id",
			"value": ""
		},
		{
			"id": "e7e5eb4b-c45b-4c8b-8ef7-9baac745d2c4",
			"key": "created_page_metadata",
			"value": ""
		},
		{
			"id": "7df00cdd-294a-4c17-afe8-0eac4be10217",
			"key": "created_page_metadata_id",
			"value": ""
		}
	],
	"protocolProfileBehavior": {}
}
